<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Methods</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: Arial, Helvetica, sans-serif; background: #f7f7f7; margin: 0; padding: 0; }
        .header { background-color: #1976d2; color: #fff; padding: 30px 10px; text-align: center; font-size: 2.2rem; letter-spacing: 1px; }
        .container { max-width: 420px; margin: 40px auto 0 auto; background: #fff; border-radius: 16px; box-shadow: 0 8px 32px rgba(25,118,210,0.12); padding: 40px 32px 32px 32px; }
        .modern-btn { background: #1976d2; color: #fff; border: none; border-radius: 10px; padding: 16px 32px; font-size: 1.15rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 16px rgba(25,118,210,0.10); transition: background 0.2s, box-shadow 0.2s; display: block; margin: 0 auto; }
        .modern-btn:hover { background: #1565c0; box-shadow: 0 6px 24px rgba(25,118,210,0.16); }
        .footer { margin-top: 48px; }
        h2 { margin-top: 0; color: #1976d2; text-align: center; }
        .payment-options label { display: flex; align-items: center; background: #f1f1f1; border-radius: 8px; padding: 14px 16px; margin-bottom: 14px; cursor: pointer; transition: background 0.2s, box-shadow 0.2s; border: 2px solid transparent; }
        .payment-options input[type="radio"] { accent-color: #1976d2; margin-right: 14px; transform: scale(1.2); }
        .payment-options label.selected { background: #e3f2fd; border-color: #1976d2; box-shadow: 0 2px 8px rgba(25, 118, 210, 0.08); }
        button[type="submit"] { width: 100%; background: #1976d2; color: #fff; border: none; border-radius: 8px; padding: 14px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 10px; transition: background 0.2s, box-shadow 0.2s; }
        button[type="submit"]:hover { background: #1565c0; box-shadow: 0 2px 8px rgba(25, 118, 210, 0.15); }
        .back-link { display: block; text-align: center; margin-top: 22px; color: #1976d2; text-decoration: none; font-weight: 500; transition: color 0.2s; }
        .back-link:hover { color: #0d47a1; text-decoration: underline; }
        .footer { background-color: #f1f1f1; padding: 10px; text-align: center; margin-top: 40px; font-size: 1rem; color: #888; }
        @media (max-width: 600px) {
            .container { margin: 16px; padding: 18px 8px 16px 8px; }
            .header { font-size: 1.3rem; padding: 18px 4px; }
        }
    </style>
        <!-- Modal Styles -->
        <style>
            #services-modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.32); }
            #services-modal .modal-content {
                background:#fff; max-width:420px; margin:60px auto; border-radius:12px; box-shadow:0 4px 24px rgba(0,0,0,0.12); padding:32px 24px 24px 24px; position:relative; max-height:80vh; overflow-y:auto;
            }
            #services-modal .back-arrow-btn {
                position:absolute; left:16px; top:16px; background:none; border:none; font-size:1.6rem; color:#1976d2; cursor:pointer; padding:0; margin:0;
            }
            #services-modal .close-modal-btn {
                margin:18px auto 0 auto; display:block; background:#1976d2; color:#fff; border:none; border-radius:6px; padding:10px 24px; font-size:1rem; font-weight:500; cursor:pointer;
            }
        </style>
    <script>
        // Payment amounts for each service
        const serviceAmounts = {
            "Barangay Clearance": 100,
            "Barangay Certificate": 80,
            "Business Permit": 500,
            "Community Tax Certificate": 50,
            "Barangay Indigency": 50
        };

        function updateAmountDisplay() {
            let paymentInfo = JSON.parse(localStorage.getItem('paymentInfo')) || {};
            const service = paymentInfo.service || "Barangay Clearance";
            const amount = serviceAmounts[service] || 100;
            const el = document.getElementById('amount-display');
            if (el) el.textContent = `₱${amount}.00`; 
        }

        function handlePaymentMethod(event) {
            event.preventDefault();
            const method = document.querySelector('input[name="payment_method"]:checked');
            if (!method) return;
            let paymentInfo = JSON.parse(localStorage.getItem('paymentInfo')) || {};
            const service = paymentInfo.service || "Barangay Clearance";
            const amount = serviceAmounts[service] || 100;

            if (method.value === "gcash") {
                paymentInfo.paymentMethod = "GCash";
                paymentInfo.amount = `₱${amount}.00`;
                paymentInfo.date = new Date().toLocaleString();
                localStorage.setItem('paymentInfo', JSON.stringify(paymentInfo));
                window.location.href = "payment-success.html";
            } else if (method.value === "paymaya") {
                paymentInfo.paymentMethod = "PayMaya";
                paymentInfo.amount = `₱${amount}.00`;
                paymentInfo.date = new Date().toLocaleString();
                localStorage.setItem('paymentInfo', JSON.stringify(paymentInfo));
                window.location.href = "payment-success.html";
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateAmountDisplay();
            const labels = document.querySelectorAll('.payment-options label');
            const radios = document.querySelectorAll('.payment-options input[type="radio"]');
            radios.forEach((radio, idx) => {
                radio.addEventListener('change', function() {
                    labels.forEach(l => l.classList.remove('selected'));
                    if (radio.checked) {
                        labels[idx].classList.add('selected');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <div class="header">E-Pantok Payment Methods</div>
    <div class="container">
        <div id="payment-methods-container"></div>
    </div>
    <div class="footer">&copy; 2025 E-Pantok. All rights reserved.</div>
<script>
    document.getElementById('preview-services-link')?.addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('services-modal').style.display = 'block';
    });
    document.getElementById('close-modal-btn')?.addEventListener('click', function() {
        document.getElementById('services-modal').style.display = 'none';
    });
    document.getElementById('back-arrow-btn')?.addEventListener('click', function() {
        document.getElementById('services-modal').style.display = 'none';
    });

    // Render payment methods or notice dynamically
    document.addEventListener('DOMContentLoaded', function() {
        let paymentInfo = JSON.parse(localStorage.getItem('paymentInfo')) || {};
        const container = document.getElementById('payment-methods-container');
        if (!container) return;
        if (paymentInfo.service === "Barangay Indigency") {
            container.innerHTML = `
                <h2 style='text-align:center;color:#1976d2;'>No Payment Required</h2>
                <div style='text-align:center;margin:24px 0 18px 0;color:#1976d2;font-size:1.1rem;'>Barangay Indigency is a free service.<br><span style='color:#388e3c;font-weight:500;'>No payment is required for this request.</span></div>
                <div style='background:#e3f2fd;color:#1976d2;padding:12px 16px;border-radius:8px;margin-bottom:18px;text-align:center;font-size:1rem;'>
                    <strong>Notice:</strong> Barangay Indigency is provided as a public service for those in need. Please ensure your information is accurate for faster processing.
                </div>
                <div style='text-align:center;margin:32px 0 0 0;'>
                    <span style='display:inline-block;background:#1976d2;color:#fff;padding:12px 28px;border-radius:8px;font-size:1.15rem;font-weight:bold;letter-spacing:1px;'>Processing Barangay Indigency Request...</span>
                </div>
                <a class='back-link' href='barangay-services.html'>← Back to Services</a>
            `;
        } else {
            container.innerHTML = `
                <h2>Choose Your Payment Method</h2>
                <div style='background:#e3f2fd;color:#1976d2;padding:12px 16px;border-radius:8px;margin-bottom:18px;text-align:center;font-size:1rem;'>
                    <strong>Notice:</strong> Please select your preferred payment method to continue your request. All payments are processed securely.
                </div>
                <div style='text-align:center;margin-bottom:16px;font-size:1.1rem;color:#1976d2;'>
                    Amount to Pay: <span id='amount-display'>₱100.00</span>
                </div>
                <form onsubmit="handlePaymentMethod(event)">
                    <div class='payment-options'>
                        <label>
                            <input type='radio' name='payment_method' value='gcash' required>
                            <span>GCash</span>
                        </label>
                        <label>
                            <input type='radio' name='payment_method' value='paymaya'>
                            <span>PayMaya</span>
                        </label>
                    </div>
                    <button type='submit'>Continue</button>
                </form>
                <a class='back-link' href='barangay-services.html'>← Back to Services</a>
            `;
            setTimeout(() => {
                updateAmountDisplay();
                const labels = document.querySelectorAll('.payment-options label');
                const radios = document.querySelectorAll('.payment-options input[type="radio"]');
                radios.forEach((radio, idx) => {
                    radio.addEventListener('change', function() {
                        labels.forEach(l => l.classList.remove('selected'));
                        if (radio.checked) {
                            labels[idx].classList.add('selected');
                        }
                    });
                });
            }, 10);
        }
    });
</script>
</body>
</html>